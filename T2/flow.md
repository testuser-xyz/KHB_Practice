┌─────────────────────────────────────────────────────────────┐
│                         USER                                │
│                      (Browser/Mic)                          │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ▼ WebRTC Audio Stream
┌─────────────────────────────────────────────────────────────┐
│              SmallWebRTCTransport                           │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ VAD (Silero) + Smart Turn Analyzer                   │  │
│  └──────────────────────────────────────────────────────┘  │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ▼ Audio Chunks
┌─────────────────────────────────────────────────────────────┐
│                    GroqSTTService                           │
│               (Whisper Large V3)                            │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ▼ TranscriptionFrame
┌─────────────────────────────────────────────────────────────┐
│              LLMUserContextAggregator                       │
│         (Adds user message to context)                      │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ▼ LLMMessagesFrame
┌─────────────────────────────────────────────────────────────┐
│                  GroqLLMService                             │
│              (Llama 3.1 8B Instant)                         │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ System Prompt: Restaurant Assistant Logic            │  │
│  │ - Menu knowledge (breakfast/lunch/dinner)            │  │
│  │ - Order tracking & confirmation                      │  │
│  │ - Price calculations                                 │  │
│  │ - Natural conversation flow                          │  │
│  └──────────────────────────────────────────────────────┘  │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ▼ TextFrame (streaming)
┌─────────────────────────────────────────────────────────────┐
│                CartesiaTTSService                           │
│          (Neural Voice Synthesis)                           │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ▼ AudioRawFrame
┌─────────────────────────────────────────────────────────────┐
│              SmallWebRTCTransport Output                    │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ▼ WebRTC Audio Stream
┌─────────────────────────────────────────────────────────────┐
│              LLMAssistantContextAggregator                  │
│        (Saves bot response to context)                      │
└─────────────────────────────────────────────────────────────┘



20260105_201607 -> without vad and smart turn
20260105_202522 -> with vad and smart turn